# Goldenmask

Goldenmask ç›´è¯‘ä¸ºé‡‘è‰²çš„ç½©å­ï¼Œæ˜¯æˆ‘å¯¹ä¸­å›½çš„ä¸€ç§æ­¦åŠŸâ€œé‡‘é’Ÿç½©â€çš„â€œæ„è¯‘â€ğŸ˜ã€‚ä¸‹é¢æ˜¯ç™¾åº¦ç™¾ç§‘é‡Œå…³äºé‡‘é’Ÿç½©çš„ä¸€ä¸ªè¯æ¡çš„ä»‹ç»ï¼š

> ã€é‡‘é’Ÿç½©ã€‘ä¸ºã€å°‘æ—å››å¤§ç¥åŠŸã€‘ä¹‹ä¸€ï¼Œæ˜¯ä¸€ä»£æ­¦å­¦å®—å¸ˆã€è¾¾æ‘©ã€‘æ„Ÿåˆ°ä¹‹å‰æ‰€åˆ›çš„ã€ç«¥å­åŠŸã€‘æœªè‡»äºã€åœ†æ»¡æå¢ƒã€‘è€Œåˆ›å‡ºçš„ç¬¬äºŒå¥—ç»ä¸–æ­¦å­¦ã€‚
>
> ã€é‡‘é’Ÿç½©ã€‘ä¸ºä¸€å¥—å†…å¤–å…¼ä¿®çš„æ— ä¸Šç¥åŠŸï¼Œå…±åˆ†ä¸ºåäºŒå…³ï¼Œæ¯ä¸€å…³éƒ½æ¯”å‰ä¸€å…³ç»ƒèµ·æ¥æ›´ä¸ºè‰°éš¾ï¼Œä¿®ç»ƒè€…è‹¥èƒ½é—¯è¿‡åäºŒå…³ï¼Œå¿…å®šå¤©ä¸‹æ— æ•Œ!
>
> ã€é‡‘é’Ÿç½©ã€‘ï¼Œå·ç§°å¤©ä¸‹é˜²å¾¡ç¬¬ä¸€ï¼Œç¬¬åäºŒå…³åœ†æ»¡ä¹‹åï¼Œä¸ä»…ã€é‡‘åˆšä¸åã€‘ï¼Œè€Œä¸”ä¸æ€•ã€æ°´ç«æ¯’è¯ã€‘ï¼Œæ›´èƒ½ã€ä¸çœ ä¸ä¼‘ã€‘ï¼ŒåŠŸåŠ›ã€æºæºä¸å°½ã€‘ï¼Œå ªç§°ç¥å¥‡è‡³æã€‚å³ä½¿æœªè¾¾å…ƒæ»¡ä¹‹å¢ƒï¼Œé‡‘é’Ÿç½©å…·å¤‡å—æ”»å‡»æ—¶åéœ‡çš„èƒ½åŠ›ï¼Œè¶Šæ˜¯å…³æ•°é«˜ï¼ŒåŒæ ·çš„æŠ¤ä½“èƒ½åŠ›å°±è¶Šæ˜¯å¼ºæ‚ï¼Œå¯¹æ•Œæ—¶ï¼Œå¯¹æ•Œæ–¹æ”»å‡»çš„åéœ‡åŠ›ä¹Ÿè¶Šå¼ºã€‚

å› ä¸º Goldenmask æ˜¯ä¸€ä¸ªç”¨æ¥å¯¹ Python æºç è¿›è¡ŒåŠ å¯†ä¿æŠ¤çš„å·¥å…·ï¼Œå› æ­¤ç”¨äº†é‡‘é’Ÿç½©è¿™ä¸ªåå­—ã€‚åŒæ—¶ï¼Œè¿˜å¼•å…¥äº†ä¸€ä¸ªé€‰é¡¹å«åš layerï¼Œä»£è¡¨ç€æ­¦åŠŸçš„å±‚æ•°ã€‚ç›®å‰ï¼ŒGoldenmask åªæœ‰ä¸¤å±‚åŠŸåŠ›ï¼Œä¸€å±‚ç”¨çš„æ˜¯ Python è‡ªå¸¦çš„ **Compileall**ï¼Œä¸€å±‚ç”¨çš„æ˜¯ **Cython**ã€‚

Goldenmask æ”¯æŒå¯¹ Python æ–‡ä»¶ã€Python Wheel åŒ…ã€Python æºç åŒ…ä»¥åŠ Python æ¨¡å—æ–‡ä»¶å¤¹è¿›è¡ŒåŠ å¯†ï¼Œå¯ä»¥é€‰æ‹©æ›¿æ¢åŸå§‹çš„æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥å°†ä¿æŠ¤åçš„æ–‡ä»¶æ”¾åˆ°ä¸´æ—¶çš„ç¼–è¯‘æ–‡ä»¶å¤¹ `__goldenmask__` ã€‚æ­¤å¤–ï¼Œæ¯ä¸€æ¬¡ä¿æŠ¤ï¼Œè¿˜ä¼šç”Ÿæˆä¸€ä¸ªå«åš `.goldenmask` çš„æ–‡ä»¶ï¼Œé‡Œé¢è®°å½•äº†ç¼–è¯‘ Python æ–‡ä»¶ä½¿ç”¨çš„ Python ç‰ˆæœ¬å’Œæ“ä½œç³»ç»Ÿä¿¡æ¯ã€‚

## å°è¯•ç‰›åˆ€

```bash
$ pip install goldenmask
# é»˜è®¤æ–¹æ³•æ˜¯ä½¿ç”¨ Compileall ç¼–è¯‘ä¸º pyc
$ goldenmask yourpythonfile.py
$ tree -a .
.
â”œâ”€â”€ __goldenmask__
â”‚   â”œâ”€â”€ .goldenmask
â”‚   â””â”€â”€ yourpythonfile.pyc
â””â”€â”€ yourpythonfile.py

1 directory, 3 files
# ç”¨ç”Ÿæˆçš„ pyc æ–‡ä»¶æ›¿æ¢åŸå§‹çš„ py æ–‡ä»¶
$ goldenmask -i yourpythonfile.py
$ tree -a .
.
â”œâ”€â”€ .goldenmask
â””â”€â”€ yourpythonfile.pyc

0 directories, 2 files
# å¯¹åŒ…å« py çš„æ¨¡å—æ–‡ä»¶å¤¹è¿›è¡ŒåŠ å¯†
$ goldenmask yourpythonmoduledir
# å¯¹ wheel åŒ…è¿›è¡ŒåŠ å¯†
$ goldenmask goldenmask-0.1.2-py3-none-any.whl
# å¯¹æºç åŒ…è¿›è¡ŒåŠ å¯†
$ goldenmask goldenmask-0.1.2.tar.gz
```

## å®‰è£…æ–¹æ³•

å¯ä»¥ç›´æ¥é€šè¿‡ pip è¿›è¡Œå®‰è£…ï¼š

```bash
$ pip install -U goldenmask
```

å½“ç„¶æ›´æ¨èä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼Œä½¿ç”¨ Python è‡ªå¸¦çš„ vevn æ¨¡å—æˆ–è€…ç¬¬ä¸‰æ–¹çš„ vitrualenvï¼š

```bash
$ python -m venv env
# On Windows:
$ .\venv\Scripts\activate
# On Linux:
$ source env/bin/activate
$ pip install goldenmask --upgrade
```

å› ä¸º Goldenmask ä¾èµ–äº† Cython è¿™ä¸ªé¡¹ç›®ï¼Œå› æ­¤ä½ è¿˜éœ€è¦ç¡®ä¿ä½ çš„æœºå­ä¸Šå®‰è£…äº†åˆé€‚çš„ C ä»£ç ç¼–è¯‘å™¨ã€‚ä½ å¯ä»¥æŸ¥çœ‹ Cython çš„ [æ–‡æ¡£ ](https://cython.readthedocs.io/en/latest/src/quickstart/install.html)è·å¾—è¯¦ç»†çš„å®‰è£…æ–¹æ³•ã€‚æ€»çš„æ¥è¯´ï¼Œæ ¹æ®ä¸åŒçš„æ“ä½œç³»ç»Ÿæœ‰ä»¥ä¸‹ä¸‰ç§æ–¹æ³•ï¼š

1. åœ¨ Linux ç³»ç»Ÿä¸Šï¼Œå¯ä»¥ä½¿ç”¨ `sudo apt-get install build-essential` æˆ–è€… `yum groupinstall "Development Tools"` å®Œæˆ C ç¼–è¯‘å™¨åŠå…¶ä¾èµ–çš„å®‰è£…ã€‚
2. åœ¨ Macosx ç³»ç»Ÿä¸Šï¼Œå®‰è£… XCodeã€‚
3. åœ¨ Windowsæ“ä½œç³»ç»Ÿä¸Šï¼Œå®‰è£… MinGW æˆ–è€… Microsoftâ€™s Visual Cã€‚

## ä½¿ç”¨æ–¹æ³•

ç›´æ¥æŸ¥çœ‹ goldenmask çš„å¸®åŠ©æ–‡æ¡£å³å¯ã€‚

```bash
$ goldenmask --help
Usage: goldenmask [OPTIONS] [FILES_OR_DIRS]...

  Goldenmask is a tool to protect your python source code easily.

  FILES_OR_DIRS can be python files, wheel packages,source packages or dirs
  contain python files.

Options:
  -l, --layer <int>  Level of protection: 1 - compileall; 2 - cython.
  -i, --inplace      Whether compile python files in place.
  --no_smart         This will copy and compile everything you specified.
  --help             Show this message and exit.
```

## æ»´æ°´ä¹‹æ©

- [å¦‚ä½•åŠ å¯†ä½ çš„ Python ä»£ç ](https://prodesire.cn/2019/01/06/%E5%A6%82%E4%BD%95%E5%8A%A0%E5%AF%86%E4%BD%A0%E7%9A%84-Python-%E4%BB%A3%E7%A0%81-%E2%80%94%E2%80%94-%E8%AE%B0-PyCon-China-2018-%E7%9A%84%E4%B8%80%E6%AC%A1%E5%88%86%E4%BA%AB/)